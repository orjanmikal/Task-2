---
title: "Task 2"
author: "Ã˜rjan Mikal Antonsen"
date: "25 september 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
install.packages("PxWebApiData")
install.packages("tidyquant")
library(readr)
library(PxWebApiData)
library(tidyquant)
library(tidyverse)
library(tidyr)
library(dplyr)
options(encoding="UTF-8")
```

##Importerer fil 95274 som viser kapasitetsbegrensning og priser for hotell og overnatting i fylker.

```{r}
url <- ApiData("http://data.ssb.no/api/v0/dataset/95274.json?lang=no", getDataByGET = TRUE, col_types = cols(`mÃ¥ned` = col_date(format = "%Y%m")))
url

```

Henter ut datasettet fra county og fjerner pris per rom, endrer ogsÃ¥ mÃ¥ned til month pga Ã¥.

```{r}
fylke <- url[[1]]
fylke<-subset(fylke, value>0)
names(fylke) <-c("region", "date", "statistikkvariabel", "value")
fylke
head(fylke)
```

Separerer M ifra date slik at year og month blir separert
```{r}
fylkeSep <- separate(fylke, date, c("year", "month"), sep = "M")
fylkeU <- unite(fylkeSep, date, c("year", "month"), sep = "-")
```


Fikser på dato
```{r}
fylker <- mutate(fylkeU, date= as.Date(date, format= "%Y"))
nytid <- seq(as.Date("1985-01-01"), as.Date("2018-07-01"), by = "months")
repnytid <- rep(nytid, length.out = 21591)
fylker$date <- repnytid

fylker$date <- format(as.Date(fylker$date), "%Y-%m")
head(fylker)
```


histogram
```{r}
hist(fylker$value, 
     main="Histogram for value", 
     xlab="value", 
     border="blue", 
     col="green",
     xlim=c(5,100),
     las=0, 
     breaks=1000)
```


Ser på strukturen av data
```{r}
dim(fylke)
glimpse(fylke)
summary(fylke)
```



##Importerer fil 95276 som viser kap.begrensning og priser for hoteller og overnatting over hele landet.
"
```{r}
url1 <- ApiData("http://data.ssb.no/api/v0/dataset/95276.json?lang=no", getDataByGET = TRUE)
```


Henter ut datasettet fra country og fjerner pris per rom

```{r}
norge <- url1[[1]]
norge<-subset(norge, value>0)
norge
```

